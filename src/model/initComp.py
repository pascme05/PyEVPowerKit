#######################################################################################################################
#######################################################################################################################
# Title:        Python Electric Vehicle Power Toolkit (PyEVPowerKit)
# Topic:        EV Modeling
# File:         initComp
# Date:         18.03.2024
# Author:       Dr. Pascal A. Schirmer
# Version:      V.0.1
# Copyright:    Pascal Schirmer
#######################################################################################################################
#######################################################################################################################

#######################################################################################################################
# Function Description
#######################################################################################################################
"""
A short description of the function goes here.
Inputs:     1)
            2)
            N)
Outputs:    1)
            2)
            M)
"""

#######################################################################################################################
# Import libs
#######################################################################################################################
# ==============================================================================
# Internal
# ==============================================================================
from src.model.Gbx.classGBX import classGBX
from src.model.Ema.classEMA import classPSM
from src.model.Inv.classINV import classB6
from src.model.Bat.classHVS import classBat

# ==============================================================================
# External
# ==============================================================================

#######################################################################################################################
# Additional Functions
#######################################################################################################################


#######################################################################################################################
# Main Function
#######################################################################################################################
def initComp(setup):
    ###################################################################################################################
    # MSG IN
    ###################################################################################################################
    print("START: Initialise Component Classes")

    ###################################################################################################################
    # Initialisation
    ###################################################################################################################
    # ==============================================================================
    # GBX
    # ==============================================================================
    GBX = classGBX(setup['Par']['GBX']['i'], setup['Par']['GBX']['J_gbx'], setup['Par']['GBX']['c_m'],
                   setup['Par']['GBX']['c_b'], setup['Par']['GBX']['c_w'], setup['Par']['GBX']['C_th'],
                   setup['Par']['GBX']['R_th'])

    # ==============================================================================
    # EMA
    # ==============================================================================
    EMA = classPSM(setup['Par']['EMA']['p'], setup['Par']['EMA']['n_max'], setup['Par']['EMA']['n_0'],
                   setup['Par']['EMA']['T_max'], setup['Par']['EMA']['J_rot'], setup['Par']['EMA']['I_max'],
                   setup['Par']['EMA']['P_max'], setup['Par']['EMA']['Psi_pm'], setup['Par']['EMA']['L_d'],
                   setup['Par']['EMA']['L_q'], setup['Par']['EMA']['L_sig'], setup['Par']['EMA']['R_s'],
                   setup['Par']['EMA']['K_h'], setup['Par']['EMA']['K_f'], setup['Par']['EMA']['c_b'],
                   setup['Par']['EMA']['c_w'], setup['Par']['EMA']['C_th'], setup['Par']['EMA']['R_th'])

    # ==============================================================================
    # INV
    # ==============================================================================
    INV = classB6(setup['Par']['INV']['fs'], setup['Par']['INV']['Sw'], setup['Par']['INV']['nSw'],
                  setup['Par']['INV']['V_0'], setup['Par']['INV']['I_0'], setup['Par']['INV']['T_0'],
                  setup['Par']['INV']['Tj_max'], setup['Par']['INV']['V_ce0'], setup['Par']['INV']['r_T'],
                  setup['Par']['INV']['V_d0'], setup['Par']['INV']['r_D'], setup['Par']['INV']['E_on'],
                  setup['Par']['INV']['E_off'], setup['Par']['INV']['E_rec'], setup['Par']['INV']['alpha'],
                  setup['Par']['INV']['R_esr'], setup['Par']['INV']['R_g'], setup['Par']['INV']['C_dc'],
                  setup['Par']['INV']['R_ac'], setup['Par']['INV']['R_dc'], setup['Par']['INV']['C_th'],
                  setup['Par']['INV']['R_th'])

    # ==============================================================================
    # HVS
    # ==============================================================================
    HVS = classBat(setup['Par']['HVS']['R_i'], setup['Par']['HVS']['V_nom'], setup['Par']['HVS']['V_max'],
                   setup['Par']['HVS']['V_min'], setup['Par']['HVS']['E_bat'], setup['Par']['HVS']['C_th'],
                   setup['Par']['HVS']['R_th'], setup['Par']['HVS']['E_a'])

    ###################################################################################################################
    # Return
    ###################################################################################################################
    return [GBX, EMA, INV, HVS]

#######################################################################################################################
# References
#######################################################################################################################
