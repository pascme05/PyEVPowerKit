#######################################################################################################################
#######################################################################################################################
# Title:        EVOptiDrive (Optimal Drivetrain Design for Electrical Vehicles)
# Topic:        Electrical Vehicle (EV) Simulation
# File:         elecSim
# Date:         19.08.2023
# Author:       Dr. Pascal A. Schirmer
# Version:      V.0.1
# Copyright:    Pascal Schirmer
#######################################################################################################################
#######################################################################################################################

#######################################################################################################################
# Import libs
#######################################################################################################################
# ==============================================================================
# Internal
# ==============================================================================
from src.elec.HEAT.EMA.PSM.elecSimPSM import elecSimPSM
from src.elec.HEAT.INV.B6_2L.elecSimB6 import elecSimB6
from src.elec.CCU.elecSimCCU import elecSimCCU
from src.elec.HVS.elecSimHVS import elecSimHVS

# ==============================================================================
# External
# ==============================================================================


#######################################################################################################################
# Function
#######################################################################################################################
def elecSim(data, dataTime, iter, setupMdl, setupPar):
    ###################################################################################################################
    # HEAT
    ###################################################################################################################
    # ==============================================================================
    # EMA
    # ==============================================================================
    # ------------------------------------------
    # Front
    # ------------------------------------------
    # PSM
    if setupPar['EMA']['F']['type'] == 'PSM':
        dataTime = elecSimPSM(dataTime, data['V_DC'][iter], iter, setupPar, setupMdl, 'F')

    # ASM (PS 15/09/2023 tbi)
    elif setupPar['EMA']['F']['type'] == 'ASM':
        test = 1

    # SSM (PS 15/09/2023 tbi)
    elif setupPar['EMA']['F']['type'] == 'SSM':
        test = 1

    # Default
    else:
        dataTime = elecSimPSM(dataTime, data['V_DC'][iter], iter, setupPar, setupMdl, 'F')

    # ------------------------------------------
    # Rear
    # ------------------------------------------
    # PSM
    if setupPar['EMA']['R']['type'] == 'PSM':
        dataTime = elecSimPSM(dataTime, data['V_DC'][iter], iter, setupPar, setupMdl, 'R')

    # ASM (PS 15/09/2023 tbi)
    elif setupPar['EMA']['R']['type'] == 'ASM':
        test = 1

    # SSM (PS 15/09/2023 tbi)
    elif setupPar['EMA']['R']['type'] == 'SSM':
        test = 1

    # Default
    else:
        dataTime = elecSimPSM(dataTime, data['V_DC'][iter], iter, setupPar, setupMdl, 'R')

    # ==============================================================================
    # INV
    # ==============================================================================
    # ------------------------------------------
    # Front
    # ------------------------------------------
    # B6
    if setupPar['INV']['F']['type'] == 'B6':
        dataTime = elecSimB6(dataTime, data['V_DC'][iter], iter, setupPar, setupMdl, 'F')

    # Default
    else:
        dataTime = elecSimB6(dataTime, data['V_DC'][iter], iter, setupPar, setupMdl, 'F')

    # ------------------------------------------
    # Rear
    # ------------------------------------------
    # B6
    if setupPar['INV']['R']['type'] == 'B6':
        dataTime = elecSimB6(dataTime, data['V_DC'][iter], iter, setupPar, setupMdl, 'R')

    # Default
    else:
        dataTime = elecSimB6(dataTime, data['V_DC'][iter], iter, setupPar, setupMdl, 'R')

    ###################################################################################################################
    # CCU
    ###################################################################################################################
    dataTime = elecSimCCU(data, dataTime, iter, setupPar, setupMdl)

    ###################################################################################################################
    # HVS
    ###################################################################################################################
    dataTime = elecSimHVS(data, dataTime, iter, setupPar, setupMdl)

    return dataTime

    ###################################################################################################################
    # References
    ###################################################################################################################
