#######################################################################################################################
#######################################################################################################################
# Title:        Python Electric Vehicle Power Toolkit (PyEVPowerKit)
# Topic:        EV Modeling
# File:         save
# Date:         18.03.2024
# Author:       Dr. Pascal A. Schirmer
# Version:      V.0.1
# Copyright:    Pascal Schirmer
#######################################################################################################################
#######################################################################################################################

#######################################################################################################################
#######################################################################################################################

#######################################################################################################################
# Function Description
#######################################################################################################################
"""
This function saves the results to a .mat file under /results.
Inputs:     1) dataTime:    time dependent data
            2) path:        all path variables
            3) setup:       includes all simulation variables
Outputs:    None
"""

#######################################################################################################################
# Import libs
#######################################################################################################################
# ==============================================================================
# Internal
# ==============================================================================

# ==============================================================================
# External
# ==============================================================================
from datetime import datetime
import os
from scipy.io import savemat

#######################################################################################################################
# Additional Functions
#######################################################################################################################


#######################################################################################################################
# Main Function
#######################################################################################################################
def save(dataTime, dataLife, path, setup):
    ###################################################################################################################
    # MSG IN
    ###################################################################################################################
    print("INFO: Saving result files")

    ###################################################################################################################
    # Initialisation
    ###################################################################################################################
    # ==============================================================================
    # Parameters
    # ==============================================================================
    now = datetime.now()
    dt_string = now.strftime("%d_%m_%Y_%H_%M_%S")

    # ==============================================================================
    # Variables
    # ==============================================================================
    resultTime = 'result_Time_' + setup['Exp']['name'] + '_' + dt_string + '.mat'
    resultLife = 'result_Life_' + setup['Exp']['name'] + '_' + dt_string + '.mat'

    ###################################################################################################################
    # Saving
    ###################################################################################################################
    # ==============================================================================
    # Changing Path
    # ==============================================================================
    os.chdir(path['resPath'])

    # ==============================================================================
    # Saving Results
    # ==============================================================================
    savemat(resultTime, dataTime)
    savemat(resultLife, dataLife)

    # ==============================================================================
    # Changing Path
    # ==============================================================================
    os.chdir(path['basePath'])

    ###################################################################################################################
    # MSG Out
    ###################################################################################################################
    print("INFO: Saving results done")

    ###################################################################################################################
    # Return
    ###################################################################################################################
    return []

#######################################################################################################################
# References
#######################################################################################################################
